#server {
#	listen 80;
#	listen 443 ssl;
#
#	ssl_certificate /etc/ssl/nginx/nginx.crt;
#	ssl_certificate_key /etc/ssl/nginx/nginx.key;
#
#	rewrite ^(.*) $scheme://www.max-aab.de$1 permanent;
#}

server {
	listen 80;
	listen 443 ssl;

	server_name boca-app.com bocaloves.me;
	root /var/www/localhost/htdocs;

	ssl_certificate /etc/ssl/nginx/nginx.crt;
	ssl_certificate_key /etc/ssl/nginx/nginx.key;

	index index.html index.php;
	fastcgi_index index.php;

	log_not_found off;

	location ~ ^/admin/.*\.php {
		auth_basic "restricted";
		auth_basic_user_file /etc/nginx/servers/boca.passwd;
		include /etc/nginx/modules/fastcgi.conf;
		fastcgi_pass unix:/var/run/php-fpm/nginx.socket;
	}

	location ~ ^/admin {
		auth_basic "restricted";
		auth_basic_user_file /etc/nginx/servers/boca.passwd;
	}

	location ~ ^/unternehmen/.*\.php {
		auth_basic "restricted";
		auth_basic_user_file /etc/nginx/servers/boca.passwd;
		include /etc/nginx/modules/fastcgi.conf;
		fastcgi_pass unix:/var/run/php-fpm/nginx.socket;
	}

	location ~ ^/unternehmen {
		auth_basic "restricted";
		auth_basic_user_file /etc/nginx/servers/boca.passwd;
	}

	include /etc/nginx/php.conf;

	location / {
		index index.php;
		try_files $uri $uri/ @php;
	}

	location @php {
		include /etc/nginx/modules/fastcgi.conf;
		fastcgi_pass unix:/var/run/php-fpm/nginx.socket;
	}
}
