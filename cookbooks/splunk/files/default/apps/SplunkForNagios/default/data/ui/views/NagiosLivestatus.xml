<view autoCancelInterval="90" isVisible="true" objectMode="SimpleDashboard" onunloadCancelJobs="true" refresh="-1" template="dashboard.html">
  <label>Livestatus Dashboard</label>
  <module name="AccountBar" layoutPanel="appHeader"/>
  <module name="AppBar" layoutPanel="navigationHeader"/>
  <module name="Message" layoutPanel="messaging">
    <param name="filter">*</param>
    <param name="clearOnJobDispatch">False</param>
    <param name="maxSize">1</param>
  </module>
  <module name="Message" layoutPanel="messaging">
    <param name="filter">splunk.search.job</param>
    <param name="clearOnJobDispatch">True</param>
    <param name="maxSize">1</param>
  </module>
  <module name="TitleBar" layoutPanel="viewHeader">
    <param name="actionsMenuFilter">dashboard</param>
  </module>

  <module name="HiddenSearch" layoutPanel="panel_row1_col1_grp1" group="Hosts (Up - Down - Unreachable)" autoRun="True">
    <param name="search"><![CDATA[
      index=nagios sourcetype=nagios nagiosevent="CURRENT HOST STATE" |
      livehostsupstatus |
      stats max(livehostsupstatus) AS livehostsupstatus |
      rangemap field=livehostsupstatus low=0-0 low=1-1 default=low
      ]]>
    </param>
    <param name="earliest">-24h</param>
    <module name="SingleValue">
      <param name="field">livehostsupstatus</param>
      <param name="classField">range</param>
    </module>
  </module>

  <module name="HiddenSearch" layoutPanel="panel_row1_col1_grp2" group="Hosts Down" autoRun="True">
    <param name="search"><![CDATA[
      index=nagios sourcetype=nagios nagiosevent="CURRENT HOST STATE" |
      livehostsdownstatus|
      stats max(livehostsdownstatus) AS livehostsdownstatus |
      rangemap field=livehostsdownstatus severe=0-0 severe=1-1 default=severe
      ]]>
    </param>
    <param name="earliest">-24h</param>
    <module name="SingleValue">
      <param name="field">livehostsdownstatus</param>
      <param name="classField">range</param>
    </module>
  </module>

  <module name="HiddenSearch" layoutPanel="panel_row1_col1_grp3" group="Hosts Unreachable" autoRun="True">
    <param name="search"><![CDATA[
      index=nagios sourcetype=nagios nagiosevent="CURRENT HOST STATE" |
      livehostsunreachablestatus |
      stats max(livehostsunreachablestatus) AS livehostsunreachablestatus |
      rangemap field=livehostsunreachablestatus high=0-0 high=1-1 default=high
      ]]>
    </param>
    <param name="earliest">-24h</param>
    <module name="SingleValue">
      <param name="field">livehostsunreachablestatus</param>
      <param name="classField">range</param>
    </module>
  </module>

  <module name="HiddenSearch" layoutPanel="panel_row2_col1_grp1" group="Services (OK - Warning - Critical - Unknown)" autoRun="True">
    <param name="search"><![CDATA[
      index=nagios sourcetype=nagios nagiosevent="CURRENT HOST STATE" |
      liveserviceokstatus |
      stats max(liveserviceokstatus) AS liveserviceokstatus |
      rangemap field=liveserviceokstatus low=0-0 low=1-1 default=low
      ]]>
    </param>
    <param name="earliest">-24h</param>
    <module name="SingleValue">
      <param name="field">liveserviceokstatus</param>
      <param name="classField">range</param>
    </module>
  </module>

  <module name="HiddenSearch" layoutPanel="panel_row2_col1_grp2" group="Warning Alerts" autoRun="True">
    <param name="search"><![CDATA[
      index=nagios sourcetype=nagios nagiosevent="CURRENT HOST STATE" |
      liveservicewarningstatus |
      stats max(liveservicewarningstatus) AS liveservicewarningstatus |
      rangemap field=liveservicewarningstatus elevated=0-0 elevated=1-1 default=elevated
      ]]>
    </param>
    <param name="earliest">-24h</param>
    <module name="SingleValue">
      <param name="field">liveservicewarningstatus</param>
      <param name="classField">range</param>
    </module>
  </module>

  <module name="HiddenSearch" layoutPanel="panel_row2_col1_grp3" group="Critical Alerts" autoRun="True">
    <param name="search"><![CDATA[
      index=nagios sourcetype=nagios nagiosevent="CURRENT HOST STATE" |
      liveservicecriticalstatus |
      stats max(liveservicecriticalstatus) AS liveservicecriticalstatus |
      rangemap field=liveservicecriticalstatus severe=0-0 severe=1-1 default=severe
      ]]>
    </param>
    <param name="earliest">-24h</param>
    <module name="SingleValue">
      <param name="field">liveservicecriticalstatus</param>
      <param name="classField">range</param>
    </module>
  </module>

  <module name="HiddenSearch" layoutPanel="panel_row2_col1_grp4" group="Unknown Alerts" autoRun="True">
    <param name="search"><![CDATA[
      index=nagios sourcetype=nagios nagiosevent="CURRENT HOST STATE" |
      liveserviceunknownstatus |
      stats max(liveserviceunknownstatus) AS liveserviceunknownstatus |
      rangemap field=liveserviceunknownstatus high=0-0 high=1-1 default=high
      ]]>
    </param>
    <param name="earliest">-24h</param>
    <module name="SingleValue">
      <param name="field">liveserviceunknownstatus</param>
      <param name="classField">range</param>
    </module>
  </module>

  <module name="HiddenSearch" layoutPanel="panel_row3_col1" group="Service Alerts" autoRun="True">
    <param name="search"><![CDATA[
      index="nagios" ((nagiosevent="CURRENT SERVICE STATE" servicestate="HARD") NOT servicestatus="OK") OR ((nagiosevent="SERVICE ALERT" state="HARD") NOT status="OK") |
      liveservicestate |
      search NOT liveservicestate=0 |
      dedup src_host,name |
      table src_host, name, liveservicestate, severity, reason
      ]]>
    </param>
    <param name="earliest">-24h</param>
    <module name="SimpleResultsTable">
      <param name="dataOverlayMode">heatmap</param>
      <param name="count">500</param>
    </module>
  </module>


</view>
